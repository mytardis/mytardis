

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MyTardis Publication Workflow &mdash; MyTardis  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="MyTardis  documentation" href="index.html"/>
        <link rel="prev" title="MyTardis Quick Reference Guide" href="quick.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MyTardis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick.html">MyTardis Quick Reference Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MyTardis Publication Workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#listing-existing-publications-and-drafts">Listing Existing Publications and Drafts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-draft-publication">Creating a Draft Publication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resuming-a-draft-publication">Resuming a Draft Publication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deleting-a-draft-publication">Deleting a Draft Publication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minting-a-doi-digital-object-identifier">Minting a DOI (Digital Object Identifier)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sharing-a-draft-publication">Sharing a Draft Publication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#for-mytardis-system-administrators">For MyTardis System Administrators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enabling-or-disabling-the-publication-workflow">Enabling or Disabling the Publication Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publication-workflow-settings">Publication Workflow Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-licenses">Installing Licenses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minting-dois">Minting DOIs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MyTardis</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>MyTardis Publication Workflow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pub-workflow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mytardis-publication-workflow">
<h1>MyTardis Publication Workflow<a class="headerlink" href="#mytardis-publication-workflow" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="listing-existing-publications-and-drafts">
<h3>Listing Existing Publications and Drafts<a class="headerlink" href="#listing-existing-publications-and-drafts" title="Permalink to this headline">¶</a></h3>
<p>Click on “My Publications” in the menu bar to see existing publications and drafts which you have access to:</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
</div>
<div class="section" id="creating-a-draft-publication">
<h3>Creating a Draft Publication<a class="headerlink" href="#creating-a-draft-publication" title="Permalink to this headline">¶</a></h3>
<p>From the “My Publications” page, click “Create publication” to begin a draft publication:</p>
<img alt="_images/create-publication.png" src="_images/create-publication.png" />
<p>The publication form should appear, showing whatever introductory text has
been configured by your MyTardis administrator, using the
<code class="docutils literal"><span class="pre">PUBLICATION_INTRODUCTION</span></code> setting in <code class="docutils literal"><span class="pre">tardis/settings.py</span></code>:</p>
<img alt="_images/publication-form-introduction.png" src="_images/publication-form-introduction.png" />
<p>After acknowledging the introductory text, you can begin selecting datasets
to include in your publication:</p>
<img alt="_images/pub-form-selecting-datasets.png" src="_images/pub-form-selecting-datasets.png" />
<p>Selected datasets appear on the right:</p>
<img alt="_images/pub-form-selected-dataset.png" src="_images/pub-form-selected-dataset.png" />
<p>You can then describe each included dataset (beyond what is already in the
dataset’s description field):</p>
<img alt="_images/pub-form-extra-info.png" src="_images/pub-form-extra-info.png" />
<p>The final page allows you to specify the authors, license, acknowledgements and
release date.  <strong>The last page of the form will be split into two pages in the
next version of the publication form.</strong></p>
<img alt="_images/pub-form-final-page.png" src="_images/pub-form-final-page.png" />
<p>After clicking “Save and finish Later”, you can see the publication in the Drafts
section of the “My Publications” page:</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
</div>
<div class="section" id="resuming-a-draft-publication">
<h3>Resuming a Draft Publication<a class="headerlink" href="#resuming-a-draft-publication" title="Permalink to this headline">¶</a></h3>
<p>The “Resume draft” button below opens the publication form, allowing you to make further changes:</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
<p>When resuming a draft, you will be taken straight to the second page of the publication form below,
skipping the introductory text:</p>
<img alt="_images/pub-form-selected-dataset.png" src="_images/pub-form-selected-dataset.png" />
</div>
<div class="section" id="deleting-a-draft-publication">
<h3>Deleting a Draft Publication<a class="headerlink" href="#deleting-a-draft-publication" title="Permalink to this headline">¶</a></h3>
<p>The “Delete draft” button below allowd you to delete a draft publication:</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
<p>You will be asked to confirm that you really want to delete the draft publication:</p>
<img alt="_images/delete-confirmation.png" src="_images/delete-confirmation.png" />
</div>
<div class="section" id="minting-a-doi-digital-object-identifier">
<h3>Minting a DOI (Digital Object Identifier)<a class="headerlink" href="#minting-a-doi-digital-object-identifier" title="Permalink to this headline">¶</a></h3>
<p>The “Mint DOI” button below allowd you to mint a DOI (Digital Object Identifier):</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
<p>You will be asked to confirm that you really want to mint a DOI:</p>
<img alt="_images/mint-doi-confirmation.png" src="_images/mint-doi-confirmation.png" />
</div>
<div class="section" id="sharing-a-draft-publication">
<h3>Sharing a Draft Publication<a class="headerlink" href="#sharing-a-draft-publication" title="Permalink to this headline">¶</a></h3>
<p>The “Share” button below opens temporary links dialog, allowing you grant short-term access (3 months)
to the draft publication via a temporary URL:</p>
<a class="reference internal image-reference" href="_images/my-publications-draft-saved.png"><img alt="_images/my-publications-draft-saved.png" src="_images/my-publications-draft-saved.png" style="width: 90%;" /></a>
<p>The first time you click Share, you won’t have any tokens for granting temporary access:</p>
<img alt="_images/temporary-links-no-tokens.png" src="_images/temporary-links-no-tokens.png" />
<p>After clicking the “Create New Temporary Link” button, you should see a temporary link:</p>
<img alt="_images/temporary-links-one-token.png" src="_images/temporary-links-one-token.png" />
</div>
</div>
<div class="section" id="for-mytardis-system-administrators">
<h2>For MyTardis System Administrators<a class="headerlink" href="#for-mytardis-system-administrators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enabling-or-disabling-the-publication-workflow">
<h3>Enabling or Disabling the Publication Workflow<a class="headerlink" href="#enabling-or-disabling-the-publication-workflow" title="Permalink to this headline">¶</a></h3>
<p>The publication workflow is enabled by default in a new MyTardis installation:</p>
<p><code class="docutils literal"><span class="pre">tardis/default_settings/apps.py:</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span>
    <span class="s1">&#39;tardis.apps.publication_workflow&#39;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If necessary, it can be disabled in <code class="docutils literal"><span class="pre">tardis/settings.py</span></code> as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">disabled_apps</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;publication_workflow&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">app</span> <span class="ow">in</span> <span class="n">disabled_apps</span><span class="p">:</span>
    <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">app</span><span class="p">,</span> <span class="n">INSTALLED_APPS</span><span class="p">)</span>
</pre></div>
</div>
<p>When the publication workflow is enabled, you should see the “My Publications” link in the menu bar:</p>
<img alt="_images/my-publications-link.png" src="_images/my-publications-link.png" />
</div>
<div class="section" id="publication-workflow-settings">
<h3>Publication Workflow Settings<a class="headerlink" href="#publication-workflow-settings" title="Permalink to this headline">¶</a></h3>
<p>To use the default publication workflow settings, add the following to your <code class="docutils literal"><span class="pre">tardis/settings.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tardis.apps.publication_workflow.default_settings</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-licenses">
<h3>Installing Licenses<a class="headerlink" href="#installing-licenses" title="Permalink to this headline">¶</a></h3>
<p>The publication workflow app contains Creative Commons licenses in
<code class="docutils literal"><span class="pre">tardis/apps/publication_workflow/fixtures/licenses.json</span></code> which
can be installed with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">mytardis</span><span class="o">.</span><span class="n">py</span> <span class="n">loaddata</span> <span class="n">licenses</span>
</pre></div>
</div>
<img alt="_images/licenses.png" src="_images/licenses.png" />
</div>
<div class="section" id="minting-dois">
<h3>Minting DOIs<a class="headerlink" href="#minting-dois" title="Permalink to this headline">¶</a></h3>
<p>From Wikipedia, “a Digital Object Identifier or DOI is a persistent identifier
or handle used to uniquely identify objects, standardized by the International
Organization for Standardization”.  For example, a DOI of “10.2196/mhealth.3314”
can be resolved at <a class="reference external" href="http://dx.doi.org/10.2196/mhealth.3314">http://dx.doi.org/10.2196/mhealth.3314</a>, leading to
<a class="reference external" href="http://mhealth.jmir.org/2014/4/e50/">http://mhealth.jmir.org/2014/4/e50/</a>.  DOIs are commonly used to provide permanent
links to published articles, but they can also be used to provide permanent links
to published data.</p>
<p>MyTardis’s publication workflow provides functionality for minting DOIs using
Monash University’s DOI minting service at <a class="reference external" href="https://mod.monash.edu">https://mod.monash.edu</a> and its
corresponding test service at <a class="reference external" href="https://vera186.its.monash.edu/modc/">https://vera186.its.monash.edu/modc/</a>.  DOIs can
be minted manually by MyTardis system administrators, or from the user interface
provided in the “My Publications” view.</p>
<p>To get started, you need to register your MyTardis service as a “Webservice App” in
Monash’s DOI-minting service at <a class="reference external" href="https://mod.monash.edu">https://mod.monash.edu</a> or in its corresponding
test service at <a class="reference external" href="https://vera186.its.monash.edu/modc/">https://vera186.its.monash.edu/modc/</a>.</p>
<img alt="_images/doi-minting-apps.png" src="_images/doi-minting-apps.png" />
<p>Then you need to configure your MyTardis’s tardis/settings.py to use the DOI
minting service.  For the “mytardis-demo” DOI-minting application registered
above on <a class="reference external" href="https://vera186.its.monash.edu/modc/">https://vera186.its.monash.edu/modc/</a>, we can use the following
settings:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">MODC_DOI_ENABLED</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">MODC_DOI_API_ID</span> <span class="o">=</span> <span class="s1">&#39;514a087f-30eb-4860-a0ad-79a92e875564&#39;</span>
<span class="c1"># Use the real API password here:</span>
<span class="n">MODC_DOI_API_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;********&#39;</span>
<span class="n">MODC_DOI_MINT_DEFINITION</span> <span class="o">=</span> <span class="s1">&#39;https://vera186.its.monash.edu/modc/ws/MintDoiService.wsdl&#39;</span>
<span class="n">MODC_DOI_ACTIVATE_DEFINITION</span> <span class="o">=</span> <span class="s1">&#39;https://vera186.its.monash.edu/modc/ws/&#39;</span> \
                               <span class="s1">&#39;ActivateDoiService.wsdl&#39;</span>
<span class="n">MODC_DOI_DEACTIVATE_DEFINITION</span> <span class="o">=</span> <span class="s1">&#39;https://vera186.its.monash.edu/modc/ws/&#39;</span> \
                                 <span class="s1">&#39;DeactivateDoiService.wsdl&#39;</span>
<span class="n">MODC_DOI_ENDPOINT</span> <span class="o">=</span> <span class="s1">&#39;https://vera186.its.monash.edu/modc/ws/&#39;</span>
<span class="c1"># The MODC_DOI_MINT_URL_ROOT should be set to the base URL of your publicly</span>
<span class="c1"># accessible MyTardis server.  You can&#39;t test the DOI-minting functionality</span>
<span class="c1"># from a local dev environment (http://127.0.0.1:8000), because the URL you</span>
<span class="c1"># are minting a DOI for needs to be publicly accessible:</span>
<span class="n">MODC_DOI_MINT_URL_ROOT</span> <span class="o">=</span> <span class="s1">&#39;https://mytardisdemo.erc.monash.edu&#39;</span>
</pre></div>
</div>
<p>A DOI can be minted from the Django shell (mytardis.py shell_plus) as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tardis.apps.publication_workflow.doi</span> <span class="kn">import</span> <span class="n">DOI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doi</span> <span class="o">=</span> <span class="n">DOI</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">experiment_id</span> <span class="o">=</span> <span class="mi">105</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doi</span><span class="o">.</span><span class="n">mint</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;tardis_portal.view_experiment&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,)))</span>
<span class="go">10.5072/20/TEST_DOI_5a14bcdd0f309</span>
</pre></div>
</div>
<p>Now <a class="reference external" href="http://dx.doi.org/10.5072/20/TEST_DOI_5a14bcdd0f309">http://dx.doi.org/10.5072/20/TEST_DOI_5a14bcdd0f309</a> should resolve to
<a class="reference external" href="https://mytardisdemo.erc.monash.edu/experiment/view/105/">https://mytardisdemo.erc.monash.edu/experiment/view/105/</a>.</p>
<p>We can then deactivate this DOI until the required publication criteria are met:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">doi</span><span class="o">.</span><span class="n">deactivate</span><span class="p">()</span>
<span class="go">(reply){</span>
<span class="go">   serviceId = &quot;514a087f-30eb-4860-a0ad-79a92e875564&quot;</span>
<span class="go">   responsecode = &quot;MT003&quot;</span>
<span class="go">   message = &quot;DOI 10.5072/20/TEST_DOI_5a14bcdd0f309 was successfully deactivated.&quot;</span>
<span class="go">   doi = &quot;10.5072/20/TEST_DOI_5a14bcdd0f309&quot;</span>
<span class="go">   url = None</span>
<span class="go">   verbosemessage = None</span>
<span class="go"> }</span>
</pre></div>
</div>
<p>If we need to look up the same DOI later, e.g. after exiting the Django shell
and starting a new one, we can create a DOI instance with an existing DOI:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tardis.apps.publication_workflow.doi</span> <span class="kn">import</span> <span class="n">DOI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doi</span> <span class="o">=</span> <span class="n">DOI</span><span class="p">(</span><span class="s1">&#39;10.5072/20/TEST_DOI_5a14bcdd0f309&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doi</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>
<span class="go">(reply){</span>
<span class="go">   serviceId = &quot;514a087f-30eb-4860-a0ad-79a92e875564&quot;</span>
<span class="go">   responsecode = &quot;MT004&quot;</span>
<span class="go">   message = &quot;DOI 10.5072/20/TEST_DOI_5a14bcdd0f309 was successfully activated.&quot;</span>
<span class="go">   doi = &quot;10.5072/20/TEST_DOI_5a14bcdd0f309&quot;</span>
<span class="go">   url = None</span>
<span class="go">   verbosemessage = None</span>
<span class="go"> }</span>
</pre></div>
</div>
<p>For a complete list of the possible response codes, see:
<a class="reference external" href="https://documentation.ands.org.au/display/DOC/Cite+My+Data+M2M+Service+Responses">https://documentation.ands.org.au/display/DOC/Cite+My+Data+M2M+Service+Responses</a></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="quick.html" class="btn btn-neutral" title="MyTardis Quick Reference Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, MyTardis Development Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>